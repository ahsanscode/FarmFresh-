<%- include("partials/header.ejs") %>  <!-- Include header from partials -->

    <!-- Breadcrumb -->
    <section class="page-header" style="padding: 30px 0;">
        <div class="container">
            <nav class="breadcrumb">
                <a href="/" class="breadcrumb-link">Home</a>
                <span class="breadcrumb-separator">/</span>
                <a href="/products" class="breadcrumb-link">Products</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Organic Tomatoes</span>
            </nav>
        </div>
    </section>

    <!-- Product Detail Section -->
    <section class="product-detail-section">
        <div class="container">
            <div class="product-detail-grid">
                <!-- Product Images -->
                <div class="product-images">
                    <div class="main-image">
                        <img id="mainProductImage" src="https://images.unsplash.com/photo-1518977676601-b53f82be27a0?w=600&h=600&fit=crop" alt="Organic Tomatoes" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27600%27 height=%27600%27%3E%3Crect fill=%27%23e8f5e9%27 width=%27600%27 height=%27600%27/%3E%3Ctext fill=%27%232ecc71%27 font-family=%27Arial%27 font-size=%2724%27 x=%2750%25%27 y=%2750%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27%3EðŸ… Organic Tomatoes%3C/text%3E%3C/svg%3E'">
                        <div class="product-badges">
                            <span class="badge badge-verified"><i class="fas fa-snowflake"></i> Cold Hub Verified</span>
                            <span class="badge badge-fresh"><i class="fas fa-leaf"></i> Fresh Arrival</span>
                        </div>
                        <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                    </div>
                    <div class="thumbnail-images">
                        <img class="thumbnail active" src="https://images.unsplash.com/photo-1518977676601-b53f82be27a0?w=150&h=150&fit=crop" alt="Tomatoes View 1" onclick="changeMainImage(this.src.replace('150', '600'))">
                        <img class="thumbnail" src="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=150&h=150&fit=crop" alt="Tomatoes View 2" onclick="changeMainImage(this.src.replace('150', '600'))">
                        <img class="thumbnail" src="https://images.unsplash.com/photo-1546094096-0df4bcaaa337?w=150&h=150&fit=crop" alt="Tomatoes View 3" onclick="changeMainImage(this.src.replace('150', '600'))">
                        <img class="thumbnail" src="https://images.unsplash.com/photo-1606666792160-1series288?w=150&h=150&fit=crop" alt="Tomatoes View 4" onclick="changeMainImage(this.src.replace('150', '600'))">
                    </div>
                </div>

                <!-- Product Information -->
                <div class="product-info-detail">
                    <h1 class="product-title">Organic Tomatoes</h1>
                    
                    <div class="product-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <span class="rating-text">(4.5 out of 5 | 127 reviews)</span>
                    </div>

                    <div class="product-pricing-detail">
                        <div class="price-row">
                            <span class="farm-price-large">à§³45</span>
                            <span class="price-unit">/kg</span>
                        </div>
                        <div class="price-comparison">
                            <span class="market-price">Market Price: à§³70/kg</span>
                            <span class="savings-badge">You Save 36% (à§³25/kg)</span>
                        </div>
                    </div>

                    <div class="farmer-info-card">
                        <div class="farmer-avatar">
                            <img src="https://ui-avatars.com/api/?name=Ahmed+Khan&background=2ecc71&color=fff&size=60" alt="Ahmed Khan">
                        </div>
                        <div class="farmer-details">
                            <p class="farmer-label">Grown by</p>
                            <h3 class="farmer-name"><a href="/farmers">Ahmed Khan</a></h3>
                            <p class="farmer-location"><i class="fas fa-map-marker-alt"></i> Jessore, Bangladesh</p>
                        </div>
                        <div class="farmer-verified">
                            <i class="fas fa-check-circle"></i>
                            <span>Verified Farmer</span>
                        </div>
                    </div>

                    <div class="product-description">
                        <h3>About This Product</h3>
                        <p>Premium quality organic tomatoes, handpicked from certified organic farms. These tomatoes are grown without synthetic pesticides or fertilizers, ensuring you get the healthiest and most flavorful produce.</p>
                        <ul class="product-features">
                            <li><i class="fas fa-check"></i> 100% Organic - No chemical pesticides</li>
                            <li><i class="fas fa-check"></i> Freshly harvested within 24 hours</li>
                            <li><i class="fas fa-check"></i> Rich in vitamins and antioxidants</li>
                            <li><i class="fas fa-check"></i> Cold chain maintained for freshness</li>
                        </ul>
                    </div>

                    <div class="quantity-selector">
                        <label for="quantity">Quantity (kg)</label>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="decrementQuantity()"><i class="fas fa-minus"></i></button>
                            <input type="number" id="quantity" value="1" min="1" max="50">
                            <button class="qty-btn" onclick="incrementQuantity()"><i class="fas fa-plus"></i></button>
                        </div>
                        <span class="min-order">Minimum order: 1 kg</span>
                    </div>

                    <div class="product-actions">
                        <button class="btn btn-primary btn-large">
                            <i class="fas fa-shopping-cart"></i>
                            Add to Cart
                        </button>
                        <button class="btn btn-outline btn-large">
                            <i class="fas fa-bolt"></i>
                            Buy Now
                        </button>
                    </div>

                    <div class="delivery-info">
                        <div class="delivery-item">
                            <i class="fas fa-truck"></i>
                            <div>
                                <strong>Free Delivery</strong>
                                <p>On orders above à§³500</p>
                            </div>
                        </div>
                        <div class="delivery-item">
                            <i class="fas fa-undo"></i>
                            <div>
                                <strong>Easy Returns</strong>
                                <p>7-day return policy</p>
                            </div>
                        </div>
                        <div class="delivery-item">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <strong>Quality Guaranteed</strong>
                                <p>100% fresh or refund</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Details Tabs -->
            <div class="product-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="openTab(event, 'description')">Description</button>
                    <button class="tab-btn" onclick="openTab(event, 'nutritional')">Nutritional Info</button>
                    <button class="tab-btn" onclick="openTab(event, 'reviews')">Reviews (127)</button>
                    <button class="tab-btn" onclick="openTab(event, 'farmer')">About the Farmer</button>
                </div>

                <div id="description" class="tab-content active">
                    <h3>Product Description</h3>
                    <p>Our organic tomatoes are carefully cultivated using traditional farming methods combined with modern organic practices. Grown in nutrient-rich soil under optimal conditions, these tomatoes develop a perfect balance of sweetness and acidity.</p>
                    <p>Each tomato is hand-selected at peak ripeness to ensure maximum flavor and nutritional value. The cold chain is maintained from harvest to delivery, preserving the freshness and extending shelf life naturally.</p>
                    
                    <h4>Storage Instructions</h4>
                    <ul>
                        <li>Store at room temperature until ripe</li>
                        <li>Once ripe, refrigerate to extend freshness</li>
                        <li>Best consumed within 5-7 days</li>
                        <li>Keep away from direct sunlight</li>
                    </ul>

                    <h4>Usage Suggestions</h4>
                    <p>Perfect for salads, curries, pasta sauces, soups, and fresh juices. Can also be enjoyed raw with a pinch of salt and pepper.</p>
                </div>

                <div id="nutritional" class="tab-content">
                    <h3>Nutritional Information</h3>
                    <p>Per 100g serving</p>
                    <table class="nutrition-table">
                        <tr>
                            <td>Calories</td>
                            <td>18 kcal</td>
                        </tr>
                        <tr>
                            <td>Carbohydrates</td>
                            <td>3.9g</td>
                        </tr>
                        <tr>
                            <td>Protein</td>
                            <td>0.9g</td>
                        </tr>
                        <tr>
                            <td>Fat</td>
                            <td>0.2g</td>
                        </tr>
                        <tr>
                            <td>Fiber</td>
                            <td>1.2g</td>
                        </tr>
                        <tr>
                            <td>Vitamin C</td>
                            <td>13.7mg (23% DV)</td>
                        </tr>
                        <tr>
                            <td>Vitamin K</td>
                            <td>7.9Î¼g (10% DV)</td>
                        </tr>
                        <tr>
                            <td>Potassium</td>
                            <td>237mg (7% DV)</td>
                        </tr>
                    </table>
                    <p class="nutrition-note"><strong>Note:</strong> Percent Daily Values are based on a 2,000 calorie diet.</p>
                </div>

                <div id="reviews" class="tab-content">
                    <h3>Customer Reviews</h3>
                    <div class="reviews-summary">
                        <div class="rating-overview">
                            <div class="rating-score">4.5</div>
                            <div class="rating-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <p>Based on 127 reviews</p>
                        </div>
                        <div class="rating-breakdown">
                            <div class="rating-bar">
                                <span>5 <i class="fas fa-star"></i></span>
                                <div class="bar"><div class="fill" style="width: 75%"></div></div>
                                <span>95</span>
                            </div>
                            <div class="rating-bar">
                                <span>4 <i class="fas fa-star"></i></span>
                                <div class="bar"><div class="fill" style="width: 15%"></div></div>
                                <span>19</span>
                            </div>
                            <div class="rating-bar">
                                <span>3 <i class="fas fa-star"></i></span>
                                <div class="bar"><div class="fill" style="width: 6%"></div></div>
                                <span>8</span>
                            </div>
                            <div class="rating-bar">
                                <span>2 <i class="fas fa-star"></i></span>
                                <div class="bar"><div class="fill" style="width: 3%"></div></div>
                                <span>4</span>
                            </div>
                            <div class="rating-bar">
                                <span>1 <i class="fas fa-star"></i></span>
                                <div class="bar"><div class="fill" style="width: 1%"></div></div>
                                <span>1</span>
                            </div>
                        </div>
                    </div>

                    <div class="reviews-list">
                        <div class="review-item">
                            <div class="review-header">
                                <div class="reviewer-info">
                                    <img src="https://ui-avatars.com/api/?name=Ayesha+Rahman&background=3498db&color=fff&size=50" alt="Ayesha Rahman">
                                    <div>
                                        <h4>Ayesha Rahman</h4>
                                        <div class="review-stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <span class="review-date">2 days ago</span>
                            </div>
                            <p class="review-text">Absolutely fresh and delicious! The tomatoes arrived in perfect condition. You can really taste the difference with organic produce. Will definitely order again!</p>
                            <div class="review-helpful">
                                <button><i class="far fa-thumbs-up"></i> Helpful (24)</button>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-header">
                                <div class="reviewer-info">
                                    <img src="https://ui-avatars.com/api/?name=Kamal+Hossain&background=e74c3c&color=fff&size=50" alt="Kamal Hossain">
                                    <div>
                                        <h4>Kamal Hossain</h4>
                                        <div class="review-stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <span class="review-date">1 week ago</span>
                            </div>
                            <p class="review-text">Great quality tomatoes. Very fresh and juicy. The cold chain really makes a difference. Only minor issue was one tomato was slightly bruised, but overall excellent!</p>
                            <div class="review-helpful">
                                <button><i class="far fa-thumbs-up"></i> Helpful (18)</button>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-header">
                                <div class="reviewer-info">
                                    <img src="https://ui-avatars.com/api/?name=Fatima+Begum&background=9b59b6&color=fff&size=50" alt="Fatima Begum">
                                    <div>
                                        <h4>Fatima Begum</h4>
                                        <div class="review-stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <span class="review-date">2 weeks ago</span>
                            </div>
                            <p class="review-text">Best tomatoes I've bought online! Supporting local farmers and getting better quality at lower prices - win-win. The packaging was also eco-friendly which I appreciate.</p>
                            <div class="review-helpful">
                                <button><i class="far fa-thumbs-up"></i> Helpful (31)</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="farmer" class="tab-content">
                    <h3>About Ahmed Khan</h3>
                    <div class="farmer-profile">
                        <img src="https://ui-avatars.com/api/?name=Ahmed+Khan&background=2ecc71&color=fff&size=120" alt="Ahmed Khan">
                        <div class="farmer-bio">
                            <h4>Ahmed Khan</h4>
                            <p class="farmer-title">Organic Vegetable Farmer</p>
                            <p class="farmer-location"><i class="fas fa-map-marker-alt"></i> Jessore, Bangladesh</p>
                            <div class="farmer-stats">
                                <div class="stat">
                                    <strong>12 years</strong>
                                    <span>Experience</span>
                                </div>
                                <div class="stat">
                                    <strong>15 acres</strong>
                                    <span>Farm Size</span>
                                </div>
                                <div class="stat">
                                    <strong>4.8/5</strong>
                                    <span>Rating</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>Ahmed Khan has been practicing organic farming for over a decade. His farm specializes in growing vegetables using sustainable methods that preserve soil health and biodiversity. Ahmed is certified by the Bangladesh Organic Products Manufacturers Association (BOPMA) and maintains strict quality standards.</p>
                    <p>His commitment to quality and sustainability has made him one of the most trusted suppliers on FarmFresh Marketplace. Ahmed believes in transparent farming practices and welcomes customers to visit his farm to see the growing process firsthand.</p>
                    <a href="/farmers" class="btn btn-outline">View All Products from Ahmed Khan</a>
                </div>
            </div>

            <!-- Related Products -->
            <div class="related-products">
                <h2 class="section-title">Similar Products</h2>
                <div class="product-grid">
                    <!-- Product Card 1 -->
                    <div class="product-card">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=300&h=200&fit=crop" alt="Cherry Tomatoes">
                            <div class="product-badges">
                                <span class="badge badge-verified"><i class="fas fa-snowflake"></i> Cold Hub Verified</span>
                            </div>
                            <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">Cherry Tomatoes</h3>
                            <p class="product-origin">Grown by <a href="/farmers" class="farmer-link">Ahmed Khan</a></p>
                            <div class="product-pricing">
                                <span class="farm-price">à§³65/kg</span>
                                <span class="market-price">à§³95/kg</span>
                                <span class="savings">Save 32%</span>
                            </div>
                            <button class="btn btn-primary btn-block">Add to Cart</button>
                        </div>
                    </div>

                    <!-- Product Card 2 -->
                    <div class="product-card">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1603048588665-791ca8aea617?w=300&h=200&fit=crop" alt="Fresh Cucumbers">
                            <div class="product-badges">
                                <span class="badge badge-fresh"><i class="fas fa-leaf"></i> Fresh Arrival</span>
                            </div>
                            <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">Fresh Cucumbers</h3>
                            <p class="product-origin">Grown by <a href="/farmers" class="farmer-link">Rahim Uddin</a></p>
                            <div class="product-pricing">
                                <span class="farm-price">à§³30/kg</span>
                                <span class="market-price">à§³50/kg</span>
                                <span class="savings">Save 40%</span>
                            </div>
                            <button class="btn btn-primary btn-block">Add to Cart</button>
                        </div>
                    </div>

                    <!-- Product Card 3 -->
                    <div class="product-card">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?w=300&h=200&fit=crop" alt="Bell Peppers">
                            <div class="product-badges">
                                <span class="badge badge-verified"><i class="fas fa-snowflake"></i> Cold Hub Verified</span>
                            </div>
                            <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">Bell Peppers (Mix)</h3>
                            <p class="product-origin">Grown by <a href="/farmers" class="farmer-link">Karim Mia</a></p>
                            <div class="product-pricing">
                                <span class="farm-price">à§³80/kg</span>
                                <span class="market-price">à§³120/kg</span>
                                <span class="savings">Save 33%</span>
                            </div>
                            <button class="btn btn-primary btn-block">Add to Cart</button>
                        </div>
                    </div>

                    <!-- Product Card 4 -->
                    <div class="product-card">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1587735243615-c03f25aaff15?w=300&h=200&fit=crop" alt="Green Lettuce">
                            <div class="product-badges">
                                <span class="badge badge-fresh"><i class="fas fa-leaf"></i> Fresh Arrival</span>
                            </div>
                            <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">Organic Lettuce</h3>
                            <p class="product-origin">Grown by <a href="/farmers" class="farmer-link">Ahmed Khan</a></p>
                            <div class="product-pricing">
                                <span class="farm-price">à§³55/kg</span>
                                <span class="market-price">à§³85/kg</span>
                                <span class="savings">Save 35%</span>
                            </div>
                            <button class="btn btn-primary btn-block">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Image Gallery
        function changeMainImage(src) {
            document.getElementById('mainProductImage').src = src;
            
            // Update active thumbnail
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Quantity Controls
        function incrementQuantity() {
            const input = document.getElementById('quantity');
            const currentValue = parseInt(input.value);
            const max = parseInt(input.getAttribute('max'));
            if (currentValue < max) {
                input.value = currentValue + 1;
            }
        }

        function decrementQuantity() {
            const input = document.getElementById('quantity');
            const currentValue = parseInt(input.value);
            const min = parseInt(input.getAttribute('min'));
            if (currentValue > min) {
                input.value = currentValue - 1;
            }
        }

        // Tab Switching
        function openTab(evt, tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }

            // Remove active class from all buttons
            const tabButtons = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }

            // Show the current tab and add active class to button
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
        }
    </script>

<%- include("partials/footer.ejs") %>  <!-- Include footer from partials -->
